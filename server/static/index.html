<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/pico.classless.min.css">
    <title>Frame</title>
</head>
<body>
<main>
    <form id="form" enctype="multipart/form-data">
        <h1>Family Frame</h1>
        <h2>File</h2>
        <input type="file" name="file" accept="image/*"/>
        <h2>Time</h2>
        <fieldset>
<!--            <label><input type="radio" name="hour" value="0"/>12:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="1"/>1:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="2"/>2:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="3"/>3:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="4"/>4:00AM</label>-->
            <label><input type="radio" name="hour" value="5"/>5:00AM</label>
<!--            <label><input type="radio" name="hour" value="6"/>6:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="7"/>7:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="8"/>8:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="9"/>9:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="10"/>10:00AM</label>-->
<!--            <label><input type="radio" name="hour" value="11"/>11:00AM</label>-->
            <label><input type="radio" name="hour" value="12"/>12:00PM</label>
<!--            <label><input type="radio" name="hour" value="13"/>1:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="14"/>2:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="15"/>3:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="16"/>4:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="17"/>5:00PM</label>-->
            <label><input type="radio" name="hour" value="18"/>6:00PM</label>
<!--            <label><input type="radio" name="hour" value="19"/>7:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="20"/>8:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="21"/>9:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="22"/>10:00PM</label>-->
<!--            <label><input type="radio" name="hour" value="23"/>11:00PM</label>-->
        </fieldset>
        <input type="submit" id="submit"/>
    </form>
</main>
<dialog id="successModal">
    <article>
        <header>
            <button aria-label="Close" rel="prev" onclick="successModal.close()"></button>
            <h3>Uploaded successfully</h3>
        </header>
        <p>The file has been uploaded. It'll start dithering, and should be ready... sometime?</p>
        <footer>
            <button autofocus role="button" onclick="successModal.close()">Confirm</button>
        </footer>
    </article>
</dialog>
<script>
    const form = document.querySelector("#form");

    form.addEventListener("submit", async (event) => {
        event.preventDefault();

        const formData = new FormData(form);
        const response = await fetch("/upload/" + document.querySelector('input[name=\'hour\']:checked').value, {
            method: "POST",
            body: formData,
        });
        if (response.ok) {
            successModal.show()
        }
    });
</script>
</body>
</html>
